\section{Tables and Plots}
\subsection{Unix stuff}

As described in subsection \nameref{subsec:metrics} in the previous chapter, linux provides through the {\bf proc pseudo-filesystem} a simple file interface to the metrics taken from the scheduler of processes that are queued in the processor. The three metrics about cpu load on 1, 5 and 15 minutes average is displayed as follows:

\begin{verbatim}
[root@gr03 ~]# cat /proc/loadavg 
2.29 0.73 0.32 1/230 3584
\end{verbatim}

which may also be displayed using the {\bf uptime command}:

\begin{verbatim}
[root@gr03 ~]# uptime
 00:01:20 up  1:41,  3 users,  load average: 2.29, 0.73, 0.32
\end{verbatim}

Looking in the Linux kernel source, there is the CALC\_LOAD macro command which takes the options that have been discused and returns the result of the metric. The definition of the macro can be seen in file {\bf /usr/src/kernels/`uname -r`/include/linux/sched.h}:

\begin{lstlisting}[caption=Linux kernel CALC\_LOAD macro]
extern unsigned long avenrun[];         /* Load averages */
extern void get_avenrun(unsigned long *loads, 
                        unsigned long offset, int shift);

#define FSHIFT    11          /* nr of bits of precision */
#define FIXED_1   (1<<FSHIFT) /* 1.0 as fixed-point */
#define LOAD_FREQ (5*HZ+1)    /* 5 sec intervals */
#define EXP_1     1884        /* 1/exp(5sec/1min) as fixed-point */
#define EXP_5     2014        /* 1/exp(5sec/5min) */
#define EXP_15    2037        /* 1/exp(5sec/15min) */

#define CALC_LOAD(load,exp,n) \
        load *= exp; \
        load += n*(FIXED_1-exp); \
        load >>= FSHIFT;

extern unsigned long total_forks;
extern int nr_threads;
DECLARE_PER_CPU(unsigned long, process_counts);
extern int nr_processes(void);
extern unsigned long nr_running(void);
extern unsigned long nr_uninterruptible(void);
extern unsigned long nr_iowait(void);
extern unsigned long nr_iowait_cpu(int cpu);
extern unsigned long this_cpu_load(void);
\end{lstlisting}

\newpage

\subsection{Gmond}

\subsubsection{Installation and configuration}
\newpage

\subsubsection{Transport and sample}
code from gmond client

example output 

port and XML staff

multicast examples
\newpage

\subsubsection{Gmetad}
\newpage

XDR

gstat -al1

\newpage

\subsection{Visualization}
Drill down and levels of visualization
\begin{enumerate}
  \item local resource
  \item site
  \item regional
  \item grid
\end{enumerate}

ganglia GUI

rrdtool
\newpage

\section{Methods of Presentation}


\subsection{WSRF}
\begin{verbatim}
/opt/globus/bin/wsrf-query \
-s https://osweb.teipir.gr:8443/wsrf/services/DefaultIndexService \
"//*[local-name()='Host']"
\end{verbatim}


\begin{lstlisting}{language=XML}
 <ns1:GLUECE xmlns:ns1="http://mds.globus.org/glue/ce/1.1">
  <ns1:Cluster ns1:Name="OSLAB" ns1:UniqueID="OSLAB">
   <ns1:SubCluster ns1:Name="main" ns1:UniqueID="main">
    <ns1:Host ns1:Name="gr03.oslab.teipir.gr" 
    ns1:UniqueID="gr03.oslab.teipir.gr" 
    xmlns:ns1="http://mds.globus.org/glue/ce/1.1">
     <ns1:Processor ns1:CacheL1="0" ns1:CacheL1D="0" 
     ns1:CacheL1I="0" ns1:CacheL2="0" ns1:ClockSpeed="2392" 
     ns1:InstructionSet="x86"/>
     <ns1:MainMemory ns1:RAMAvailable="299" ns1:RAMSize="1010" 
     ns1:VirtualAvailable="2403" ns1:VirtualSize="3132"/>
     <ns1:OperatingSystem ns1:Name="Linux"
     ns1:Release="2.6.18-194.26.1.el5"/>
     <ns1:Architecture ns1:SMPSize="2"/>
     <ns1:FileSystem ns1:AvailableSpace="201850" 
     ns1:Name="entire-system" ns1:ReadOnly="false"
     ns1:Root="/" ns1:Size="214584"/>
     <ns1:NetworkAdapter ns1:IPAddress="10.0.0.33" 
     ns1:InboundIP="true" ns1:MTU="0" 
     ns1:Name="gr03.oslab.teipir.gr" ns1:OutboundIP="true"/>
     <ns1:ProcessorLoad ns1:Last15Min="45" ns1:Last1Min="337"
     ns1:Last5Min="126"/>
    </ns1:Host>
   </ns1:SubCluster>
  </ns1:Cluster>
 </ns1:GLUECE>
\end{lstlisting}

\subsubsection{XSLT}
\newpage

\subsubsection{WebMDS and XPath}
query examples

interface and forms description
\newpage

raw XML output from WebMDS
\newpage

\subsection{BDII}
/opt/glite/etc/gip/provider/glite-info-provider-service-xxx
create a wrapper to present ganglia url and status to the BDII

Ganglia official python client:
\begin{verbatim}
[root@mon ~]# /opt/ganglia/bin/ganglia --format=MDS | grep -A 30 host=gr03
\end{verbatim}

\begin{lstlisting}
dn: host=gr03.oslab.teipir.gr, scl=sub2, cl=datatag-CNAF, \
 mds-vo-name=local, o=grid
objectclass: GlueHost
GlueHostName: gr03.oslab.teipir.gr
GlueHostUniqueID: RDLAB-TEIPIR-gr03.oslab.teipir.gr
objectclass: GlueHostArchitecture
GlueHostArchitecturePlatformType: x86-Linux
GlueHostArchitectureSMPSize: 2
objectclass: GlueHostProcessor
GlueHostProcessorClockSpeed: 2392
objectclass: GlueHostMainMemory
GlueHostMainMemoryRAMSize: 1035104
GlueHostMainMemoryRAMAvailable: 306280
objectclass: GlueHostNetworkAdapter
GlueHostNetworkAdapterName: gr03.oslab.teipir.gr
GlueHostNetworkAdapterIPAddress: 10.0.0.33
GlueHostNetworkAdapterMTU: unknown
GlueHostNetworkAdapterOutboundIP: 1
GlueHostNetworkAdapterInboundIP: 1
objectclass: GlueHostProcessorLoad
GlueHostProcessorLoadLast1Min: 2.57
GlueHostProcessorLoadLast5Min: 1.48
GlueHostProcessorLoadLast15Min: 0.58
objectclass: GlueHostSMPLoad
GlueHostSMPLoadLast1Min: 2.57
GlueHostSMPLoadLast5Min: 1.48
GlueHostSMPLoadLast15Min: 0.58
objectclass: GlueHostStorageDevice
GlueHostStorageDeviceSize: 209555000
GlueHostStorageDeviceAvailableSpace: 197120000
GlueHostStorageDeviceType: disk
\end{lstlisting}

Perl script to export MDS format:
\begin{verbatim}
[root@mon ~]# ./ganglia_ip -h mon -p 8649 -o mds | grep -A 22 host=gr03
\end{verbatim}
\begin{lstlisting}
dn: host=gr03.oslab.teipir.gr, cl=RDLAB, \
 mds-vo-name=local, o=grid
objectclass: GlueHost
GlueHostName: gr03.oslab.teipir.gr
GlueHostUniqueID: RDLAB-TEIPIR-gr03.oslab.teipir.gr
objectclass: GlueHostProcessorLoad
GlueHostProcessorLoadLast1Min: 2.57
GlueHostProcessorLoadLast5Min: 1.48
GlueHostProcessorLoadLast15Min: 0.58
objectclass: GlueHostSMPLoad
GlueHostSMPLoadLast1Min: 2.57
GlueHostSMPLoadLast5Min: 1.48
GlueHostSMPLoadLast15Min: 0.58
objectclass: GlueHostArchitecture
GlueHostArchitectureSMPSize: 2
objectclass: GlueHostProcessor
GlueHostProcessorClockSpeed: 2392
objectclass: GlueHostNetworkAdapter
GlueHostNetworkAdapterName: gr03.oslab.teipir.gr
GlueHostNetworkAdapterIPAddress: 10.0.0.33
objectclass: GlueHostMainMemory
GlueHostMainMemoryRAMSize: 1035104
GlueHostMainMemoryRAMAvailable: 306280
\end{lstlisting}

\begin{lstlisting}

[root@osweb ~]# ldapsearch -H ldap://osweb.teipir.gr:2170 -x \
-b GlueHostName=ainex.local,Mds-Vo-name=local,o=grid \
GlueHostProcessorLoadLast1Min GlueHostProcessorLoadLast5Min \
GlueHostProcessorLoadLast15Min

# ainex.local, local, grid
dn: GlueHostName=ainex.local,Mds-Vo-name=local,o=grid
GlueHostProcessorLoadLast1Min: 27
GlueHostProcessorLoadLast15Min: 22
GlueHostProcessorLoadLast5Min: 20

\end{lstlisting}

\section{Description of Information}

\subsection{DOM}
php code example

WSRF -> DOM example

\newpage

screenshot of output (green/yellow/red) colored

\newpage

pages from \url{http://people.brunel.ac.uk/~dc09ttp}

\newpage
